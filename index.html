<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="author" content="Simanelix">
    <title>Simanelix dot net</title>
    <style id="mainStyle">

*{margin:0;padding:0;box-sizing:border-box;}

#head{
  display:flex;
  flex-direction:column;
}
#head>div{
  display:flex;
  justify-items:stretch;
  padding:10px;
}
#head>div>button{
  height:70px;
  font-size:24px;
  border-radius:10px;
  flex-grow:1;
  text-align:center;
  background:none;
  border:none;
}
#head>div>input[type=checkbox]{
  height:120px;
  width:120px;
  flex-grow:0;
}
.contact_me{
  display:flex;
  width:80%;
  margin-left:10%;
  margin-top:10px;
  padding:6px;
  border-radius:8px;
}
.contact_me>.sitename{
  width:100px;
}
.contact_me>.username{
  flex-grow:1;
}
.inline{
  display:inline;
  padding:0px;
  margin:0px;
}
.typeThis,.pressThis{
  font-family:monospace;
  border-radius:4px;
  padding:0px 10px;
}
    </style>
    <style id="themeStyle">

body{
  background:/*bland*/;
}
div,#theme_option{
  color:/*textMain*/;
}
#head{
  border:5px solid /*medium*/;
}
.contact_me{
  border:5px solid /*colorB*/;
}
.typeThis{
  background:/*high*/;
}
.pressThis{
  color:/*colorA*/;
  background:/*bland*/;
}
div{
  box-shadow:2px 2px 4px /*shadowA*/;
}
    </style>
  </head>
  <body>
    
    <div id="head">
      <div id="theme_option"><button>Choose theme</button></div>
      <div id="music_option"><button>Background music</button></div>
      <div id="notifications_option"><button>Notifications</button></div>
      <div id="cookie_option"><button>Cookie</button></div>
      <div id="signin_option"><button>Sign in</button></div>
      <div id="close_option"><button>&gt;&gt; CLOSE &lt;&lt;</button></div>
    </div>
    <div id="psi">
      <div id="about">
        This is Simanelix.net! My website, made by me, Simon Willover. Click the huge [New Psi] down below to start using my application. It will open up my "Psi App" which requires no download and just works right here on this site. The app it explains itself. If  oyu have never used this before, type <div class="inline typeThis">help</div> or <div class="inline typeThis">Help</div>, and press <div class="inline pressThis">enter</div>
      </div>
      <div id="contact_me">
        <h3>Contact me:</h3>
      </div>
    </div>
    <div id="POPUP"></div>
    <script>

window.arrMap=function(obj){
  this[0]=[];
  this[1]=[];
  if(typeof obj=="object"){
    this.fromObj(obj);
  }
};
function addProto(_proto,_class){
  if(_class.prototype){
    for(let i in _proto){_class.prototype[i]=_proto[i];}
  }
  else{
    for(let i in _proto){_class.__proto__[i]=_proto[i];}
  }
}
(function(obj){
  addProto(obj,arrMap);
})({
  i:-1,
  Get:function(_prop){
    this.i=this[0].indexOf(_prop);
    if(this.i>-1){
      return this[1][this.i];
    }
    return null;
  },
  Set:function(_prop,_val){
    this.i=this[0].indexOf(_prop);
    if(this.i>-1){
      this[1][this.i]=_val;
      return _val;
    }
    else{
      this.i=this[0].length;
      this[0].push(_prop);
      this[1].push(_val);
      return _val;
    }
  },
  forEach:function(callBack){
    for(let i=0,ii=true;ii && i<this[0].length;i++){
      ii=!callBack(this[1][i],this[0][i],this[1]);
    }
  },
  setForEach:function(callBack){
    for(let i=0;i<this[0].length;i++){
      this[1][i]=callBack(this[1][i],this[0][i],this[1]);
    }
    return this;
  },
  getForEach:function(callback){
    let arr=new arrMap();
    arr[0]=this[0];
    arr[1]=this[1];
    for(let i=0;i<this[0].length;i++){
      arr[1][i]=callBack(arr[1][i],arr[0][i],arr[1]);
    }
    return arr;
  },
  getObj:function(){
    let obj={};
    for(let i=0,s;i<this[0].length;i++){
      s=this[0][i];
      obj[s.replace(/\W/g,"")]=this[1][i];
    }
    return obj;
  },
  fromObj:function(obj){
    for(let i in obj){this[0].push(i);this[1].push(obj[i]);}
  },
  clearDuplicates:function(){
    for(let i=this[0].length-1;i>-1;i--){
      if(this[0].indexOf(this[0][i])<i){
        this[0].splice(i,1);
        this[1].splice(i,1);
      }
    }
  },
  Remove:function(name){
    this.i=this[0].indexOf(name);
    if(this.i>-1){
      this[0].splice(this.i,1);
      this[1].splice(this.i,1);
    }
  },
  class:"arrMap"
});

var o={el:document.body};

var sssc=function(tagName,id,className,parent){
  let dddel;
  if(typeof parent==="object" ? (parent.el) :true){
    parent=o;
  }
  dddel=document.createElement(tagName);
  id=(id===undefined) ? ("") : (id+"");
  dddel.id=id;
  className=(className===undefined) ? ("") : (className+"");
  dddel.className=className;
  parent.el.appendChild(dddel);
  parent.els[id]={el:dddel};
  return dddel;
};

var sssHide=function(obj){
  obj.el.remove();
  obj.hidden=true;
};
var sssShow=function(obj,parent){
  parent.el.appendChild(obj.el);
  obj.hidden=false;
};

/*616-286-8687*/

var incorpHTML=function(obj,html){
  obj.el=html;
  obj.els={};
  let dddels=html.children;console.log(dddels)
  if(dddels.length>0){
    for(let i=0,ii;i<dddels.length;i++){
      ii=(dddels[i].id.length>0) ? dddels[i].id.replace(/-/g,"_").replace(/^\d/,"_$&") : i ;
      
      obj.els[ii]={};
      
      incorpHTML(obj.els[ii],dddels[i]);
    }
  }
}

incorpHTML(o,document.body);

var style=document.querySelector("#themeStyle");
var baseStyle=style.innerHTML;
var styleThemes=new arrMap();
var createTheme=function(name,obj){
  let ftext="function(){style.innerHTML=baseStyle";
  for(let i in obj){
    ftext+=".replace(/\\/\\*"+i+"\\*\\//g,\""+obj[i].replace(/\\\\/g,"\\\\").replace(/"/g,"\\\"")+"\")";
  }
  ftext+=";}";
  eval("styleThemes.Set(name,"+ftext+");");
};
var selectTheme=function(name){
  styleThemes.Get(name)();
};

var themes=new arrMap({
  light:   {bland:"white",textMain:"black",colorA:"#f11",colorB:"#a4d",high:"#aaa",medium:"#677",psi:"#2ce",shadowA:"rgba(0,0,0,0.4)"},
  dark:    {bland:"black",textMain:"white",colorA:"#609",colorB:"#160",high:"#333",medium:"#656",psi:"#2ce",shadowA:"rgba(222,255,255,0.4)"},
  aquatic: {bland:"#9cd", textMain:"#060", colorA:"#31f",colorB:"#f72",high:"#aef",medium:"#579",psi:"#2ce",shadowA:"rgba(10,99,99,0.4)"},
  magmatic:{bland:"#cb2", textMain:"#400", colorA:"#ee9",colorB:"#95f",high:"#ba6",medium:"#965",psi:"#2ce",shadowA:"rgba(110,60,0,0.4)"}
});
var selectThemeTemplate=`
<div style="color:[=textMain=];background-color:[=bland=];" class="h"><div style="display:inline;padding:4px;border:4px solid [=colorB=];border-radius:8px;background-color:[=high=];">[=THEME=]</div>
`;
for(let i=0;i<themes[0].length;i++){
  createTheme(themes[0][i],themes[1][i]);
}
selectTheme("light");

var LOAD_POPUP="";
var POPOUPS={
  theme_option:{
    text:""
  },
  music_option:{
    text:""
  },
  notifications_option:{
    text:""
  },
  cookie_option:{
    text:""
  },
  signin_option:{
    text:""
  },
};
for(let i in o.els.head.els){
  o.els.head.els[i].el.onclick=function(){
    LOAD_POPUP=this.id;
  };
}
o.els.head.els.close_option.el.onclick=function(){
  sssHide(o.els.head);
};


var updatees=new arrMap();

const mspf=16;

var startTime=new Date();
var starttime=startTime.getTime(), now=startTime;
var nowtime=now.getTime(), framesCompleted=0,framesTried=0,frameDone=true,frameTimes=[],lastFrameTime=now.getTime();
var bbbPerform={
  fps:0,
  fp10s:0,
  fpm:0,
  expected_fps:Math.round(1000/mspf*100)/100,
  expected_fp10s:Math.round(10000/mspf*100)/100,
  expected_fpm:Math.round(60000/mspf*100)/100,
  el:sssc("div","","",""),
};
bbbPerform.text=function(){
  return "<h3>bbbPerform info:</h3><div>"+this.fps+" frames this second ("+this.expected_fps+" expected), <br>"+this.fp10s+" frames this 10 seconds ("+this.expected_fp10s+" expected), <br>"+this.fpm+" frames this minute ("+this.expected_fpm+" expected).</div>";
};
bbbPerform.hide=function(){
  sssHide(this)
  updatees.Remove("bbbPerform");
};
bbbPerform.show=function(){
  sssShow(this,o);
  updatees.Set("bbbPerform",this);
};



for(let i=0;i<2048 /*frames saved*/ ;i++){
  frameTimes[i]=0;
}

var bbbScenes=new arrMap({
  home:function(){
    
  }
});
var f;
var loadScene=function(name){
  f=bbbScenes.Get(name);
};

loadScene("home");

window.setInterval(function(){
  if(frameDone){
    bbbPerform.fps=0;
    bbbPerform.fp10s=0;
    bbbPerform.fpm=0;
    for(let i=2047;i>0;i--){
      frameTimes[i]=frameTimes[i-1];
    }
    frameTimes[0]=nowtime-lastFrameTime;
    for(let i=0,acc=0;i<2048 /*frames saved*/ ;i++){
      if(frameTimes[i]>0){
        if(acc<60000){bbbPerform.fpm++;}
        if(acc<10000){bbbPerform.fp10s++;}
        if(acc<1000){bbbPerform.fps++;}
        acc+=frameTimes[0];
      }
    }
    if(framesCompleted%16==0){for(let i=0;i<updatees[1].length;i++){
      updatees[1][i].el.innerHTML=updatees[1][i].text();
    }}
    frameDone=false;
    f();
    framesCompleted++;
    frameDone=true;
  }
  lastFrameTime=nowtime;
  now=new Date();
  nowtime=now.getTime();
  framesTried++;
},16);


const contactSimonLinks=[
  ["Reddit","u/simanalix","https://reddit.com/u/simanalix"],
  ["Discord","@simanalix","https://"],
  ["Github","simon-glitch","https://"],
  ["Email","psimanelix001 @ gmail","mailto:psimanelixinbox@gmail.com"]
];
for(let i=0,ii=o.els.psi.els.contact_me;i<contactSimonLinks.length;i++){
  sssc("div","","contact_me",ii).innerHTML=
    `<div class="sitename">`+contactSimonLinks[i][0]+`</div>`+
    `<div class="username">`+contactSimonLinks[i][1]+`</div>`+
    `<a href="`+contactSimonLinks[i][2]+`">LINK</a>`;
  
}

var doc_username,doc_lastlogin,doc_theme,isSignedIn;

var GetCookie=function(){
  for(let i=0,arr=document.cookie.split(";"),ii,name,val;i<arr.length;i++){
    ii=arr[i].indexOf("=");
    if(ii==-1){/*nasty junk, get rid of it!*/document.cookie=arr[i]+"=; expires=Sat, 30 Jan 2021 20:18:30 GMT;";}
    else{
      name=arr[i].slice(0,ii);
      val=arr[i].slice(ii+1);
      if(name==="username"){doc_username=val;}
      if(name==="lastlogin"){doc_lastlogin=val;}
      if(name==="theme"){doc_theme=val;}
      else{/*more junk to rid of!*/document.cookie=name+"=; expires=Sat, 30 Jan 2021 20:18:30 GMT;";}
    }
  }
};
var SetCookie=function(){
  let ddd=new Date();ddd.setUTCFullYear(ddd.getUTCFullYear()+1000);
  document.cookie=(isSignedIn?("username="+doc_username+"; lastlogin="+(new Date()).getTime()+"; "):"")+"theme="+doc_theme+"; "+"expires="+ddd.toUTCString();
}
try{GetCookie();} catch(e){alert("What kind of hacking are you doing?!");document.querySelector("html").innerHTML="<h>You caused this error:</h1><div>"+e;}

if(doc_theme===undefined){doc_theme="light";}
else{selectTheme(doc_theme);}
    </script>
  </body>
